<div class="container">
    <h2 class="text-center my-4">Task Assign</h2>
  
    <!-- Task Listing Section -->
    <div *ngIf="isList">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <button class="btn btn-primary" (click)="isList = false; reset()">Add New Task Assignment</button>
        <div>
          <label for="pageSize">Page Size:</label>
          <select id="pageSize" [(ngModel)]="pageSize" (change)="changePageSize()">
            <option *ngFor="let size of listPageSize" [value]="size">{{ size }}</option>
          </select>
        </div>
      </div>
  
      <table class="table table-bordered table-striped">
        <thead>
          <tr>
            <th>#</th>
            <th>Task Name</th>
            <th>Member Name</th>
            <th>Active</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of listTaskAssign; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ item.name }}</td>
            <td>{{ item.memberName }}</td>
            <td>
              <span [ngClass]="item.isActive ? 'text-success' : 'text-danger'">
                {{ item.isActive ? 'Active' : 'Inactive' }}
              </span>
            </td>
            <td>
              <button class="btn btn-warning btn-sm me-2" (click)="edit(item)">Edit</button>
              <button class="btn btn-danger btn-sm" (click)="remove(item.taskAssignId)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
  
      <!-- Pagination -->
      <nav *ngIf="pager.pages.length > 1">
        <ul class="pagination justify-content-center">
          <li class="page-item" [class.disabled]="pageIndex === 0">
            <a class="page-link" href="#" (click)="changePageNumber(pageIndex - 1)">Previous</a>
          </li>
          <li class="page-item" *ngFor="let page of pager.pages; let idx = index" [class.active]="idx === pageIndex">
            <a class="page-link" href="#" (click)="changePageNumber(idx)">{{ page }}</a>
          </li>
          <li class="page-item" [class.disabled]="pageIndex === pager.totalPages - 1">
            <a class="page-link" href="#" (click)="changePageNumber(pageIndex + 1)">Next</a>
          </li>
        </ul>
      </nav>
    </div>
  
    <!-- Task Assignment Form -->
    <div *ngIf="!isList">
      <form (ngSubmit)="TaskAssign.TaskAssignId ? update() : add()">
        <div class="mb-3">
          <label for="task" class="form-control">Task</label>
          <select id="task" class="form-select" [(ngModel)]="TaskAssign.TaskId" name="task" required>
            <option value="" >Select Task</option>
            <option *ngFor="let task of listTasks" [value]="task.taskId">{{ task.name }}</option>
          </select>
        </div>
  
        <div class="mb-3">
          <label for="member" class="form-label">Member</label>
          <select id="member" class="form-select" [(ngModel)]="TaskAssign.MemberId" name="member" required>
            <option value="" disabled selected>Select Member</option>
            <option *ngFor="let member of listMembers" [value]="member.memberId">{{ member.memberName }}</option>
          </select>
        </div>
  
        <div class="form-check mb-3">
          <input type="checkbox" class="form-check-input" id="isActive" [(ngModel)]="TaskAssign.isActive" name="isActive">
          <label class="form-check-label" for="isActive">Active</label>
        </div>
  
        <div class="d-flex justify-content-between">
          <button type="button" class="btn btn-secondary" (click)="isList = true">Cancel</button>
          <button type="submit" class="btn btn-primary" >
            {{ TaskAssign.TaskAssignId ? 'Update' : 'Add' }} Assignment
          </button>
        </div>
      </form>
    </div>
  </div>
  